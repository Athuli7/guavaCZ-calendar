// resources/js/calendar-component.js
function calendarComponent({
  events = [],
  eventContent = null,
  selectable = false,
  onEventClick = false,
  options = {},
  moreLinkContent = null
}) {
  return {
    init: async function() {
      let self = this;
      let settings = {
        view: "dayGridMonth",
        // events: events,
        eventSources: [
          {
            events: (fetchInfo, successCallback, failureCallback) => this.$wire.getEventsJs()
          }
        ],
        locale: "en",
        firstDay: 1,
        dayMaxEvents: false,
        selectable: false,
        editable: false,
        eventStartEditable: false,
        eventClick: (info) => {
          if (info.event.extendedProps.url) {
            window.open(info.event.extendedProps.url, "_blank");
          } else if (onEventClick) {
            this.$wire.onEventClick(info);
          }
        }
      };
      if (eventContent !== null) {
        settings.eventContent = (info) => {
          return {
            html: self.getEventContent(info)
          };
        };
      }
      if (moreLinkContent !== null) {
        settings.moreLinkContent = (arg) => {
          return {
            html: self.getMoreLinkContent(arg)
          };
        };
      }
      if (selectable) {
        settings.selectable = true;
      }
      this.ec = new EventCalendar(this.$el.querySelector("div"), {
        ...settings,
        ...options
      });
      window.addEventListener("ec-add-event", this.addEvent);
      window.addEventListener("calendar--refresh", () => this.ec.refetchEvents());
    },
    addEvent: function(event) {
      this.ec.addEvent(event);
    },
    getEventContent: function(info) {
      if (typeof eventContent === "string") {
        console.log("eventContent", eventContent);
        return this.wrapContent(eventContent, info);
      }
      if (typeof eventContent === "object") {
        const model = info.event.extendedProps.model;
        const content = eventContent[model];
        return this.wrapContent(content, info);
      }
    },
    getMoreLinkContent: function(info) {
      return this.wrapContent(moreLinkContent, info);
    },
    wrapContent: function(content, info) {
      let container = document.createElement("div");
      container.innerHTML = content;
      container.setAttribute("x-data", JSON.stringify(info));
      container.classList.add("w-full");
      return container.outerHTML;
    },
    // Function to perform replacements
    replacePlaceholders: function(element, replacements, parentKey = "") {
      Object.keys(replacements).forEach((key) => {
        const nestedKey = parentKey ? `${parentKey}.${key}` : key;
        const value = replacements[key];
        if (typeof value === "object") {
          this.replacePlaceholders(element, value, nestedKey);
        } else {
          const placeholder = `{${nestedKey}}`;
          element.innerHTML = element.innerHTML.replace(new RegExp(placeholder, "g"), value);
        }
      });
    }
  };
}
export {
  calendarComponent as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vcmVzb3VyY2VzL2pzL2NhbGVuZGFyLWNvbXBvbmVudC5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY2FsZW5kYXJDb21wb25lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50cyA9IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50Q29udGVudCA9IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0YWJsZSA9IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXZlbnRDbGljayA9IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3JlTGlua0NvbnRlbnQgPSBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkge1xuICAgIHJldHVybiB7XG5cbiAgICAgICAgaW5pdDogYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgbGV0IHNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIHZpZXc6ICdkYXlHcmlkTW9udGgnLFxuICAgICAgICAgICAgICAgIC8vIGV2ZW50czogZXZlbnRzLFxuICAgICAgICAgICAgICAgIGV2ZW50U291cmNlczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudHM6IChmZXRjaEluZm8sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSA9PiB0aGlzLiR3aXJlLmdldEV2ZW50c0pzKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgbG9jYWxlOiAnZW4nLFxuICAgICAgICAgICAgICAgIGZpcnN0RGF5OiAxLFxuICAgICAgICAgICAgICAgIGRheU1heEV2ZW50czogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2VsZWN0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGV2ZW50U3RhcnRFZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXZlbnRDbGljazogKGluZm8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uZXZlbnQuZXh0ZW5kZWRQcm9wcy51cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGluZm8uZXZlbnQuZXh0ZW5kZWRQcm9wcy51cmwsICdfYmxhbmsnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvbkV2ZW50Q2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHdpcmUub25FdmVudENsaWNrKGluZm8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGV2ZW50Q29udGVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLmV2ZW50Q29udGVudCA9IChpbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sOiBzZWxmLmdldEV2ZW50Q29udGVudChpbmZvKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtb3JlTGlua0NvbnRlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb3JlTGlua0NvbnRlbnQgPSAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sOiBzZWxmLmdldE1vcmVMaW5rQ29udGVudChhcmcpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNlbGVjdGFibGUpIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5zZWxlY3RhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5lYyA9IG5ldyBFdmVudENhbGVuZGFyKHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoJ2RpdicpLCB7XG4gICAgICAgICAgICAgICAgLi4uc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZWMtYWRkLWV2ZW50JywgdGhpcy5hZGRFdmVudCk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2FsZW5kYXItLXJlZnJlc2gnLCAoKSA9PiB0aGlzLmVjLnJlZmV0Y2hFdmVudHMoKSlcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVjLmFkZEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRFdmVudENvbnRlbnQ6IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50Q29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXZlbnRDb250ZW50JywgZXZlbnRDb250ZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwQ29udGVudChldmVudENvbnRlbnQsIGluZm8pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGV2ZW50Q29udGVudCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RlbCA9IGluZm8uZXZlbnQuZXh0ZW5kZWRQcm9wcy5tb2RlbDtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZXZlbnRDb250ZW50W21vZGVsXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwQ29udGVudChjb250ZW50LCBpbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBnZXRNb3JlTGlua0NvbnRlbnQ6IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwQ29udGVudChtb3JlTGlua0NvbnRlbnQsIGluZm8pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHdyYXBDb250ZW50OiBmdW5jdGlvbiAoY29udGVudCwgaW5mbykge1xuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSByZXBsYWNlbWVudHNcbiAgICAgICAgICAgIC8vIHRoaXMucmVwbGFjZVBsYWNlaG9sZGVycyhjb250YWluZXIsIGluZm8pO1xuICAgICAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgneC1kYXRhJywgSlNPTi5zdHJpbmdpZnkoaW5mbykpO1xuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3ctZnVsbCcpO1xuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIG1vZGlmaWVkIEhUTUxcbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXIub3V0ZXJIVE1MO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIHBlcmZvcm0gcmVwbGFjZW1lbnRzXG4gICAgICAgIHJlcGxhY2VQbGFjZWhvbGRlcnM6IGZ1bmN0aW9uIChlbGVtZW50LCByZXBsYWNlbWVudHMsIHBhcmVudEtleSA9ICcnKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhyZXBsYWNlbWVudHMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXN0ZWRLZXkgPSBwYXJlbnRLZXkgPyBgJHtwYXJlbnRLZXl9LiR7a2V5fWAgOiBrZXk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByZXBsYWNlbWVudHNba2V5XTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHZhbHVlIGlzIGFuIG9iamVjdCwgcGVyZm9ybSByZWN1cnNpdmUgcmVwbGFjZW1lbnRzXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZVBsYWNlaG9sZGVycyhlbGVtZW50LCB2YWx1ZSwgbmVzdGVkS2V5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBQZXJmb3JtIHRoZSByZXBsYWNlbWVudFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IGB7JHtuZXN0ZWRLZXl9fWA7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gZWxlbWVudC5pbm5lckhUTUwucmVwbGFjZShuZXcgUmVnRXhwKHBsYWNlaG9sZGVyLCAnZycpLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiO0FBQWUsU0FBUixrQkFBbUM7QUFBQSxFQUNJLFNBQVMsQ0FBQztBQUFBLEVBQ1YsZUFBZTtBQUFBLEVBQ2YsYUFBYTtBQUFBLEVBQ2IsZUFBZTtBQUFBLEVBQ2YsVUFBVSxDQUFDO0FBQUEsRUFDWCxrQkFBa0I7QUFDdEIsR0FBRztBQUN6QyxTQUFPO0FBQUEsSUFFSCxNQUFNLGlCQUFrQjtBQUNwQixVQUFJLE9BQU87QUFDWCxVQUFJLFdBQVc7QUFBQSxRQUNYLE1BQU07QUFBQTtBQUFBLFFBRU4sY0FBYztBQUFBLFVBQ1Y7QUFBQSxZQUNJLFFBQVEsQ0FBQyxXQUFXLGlCQUFpQixvQkFBb0IsS0FBSyxNQUFNLFlBQVk7QUFBQSxVQUNwRjtBQUFBLFFBQ0o7QUFBQSxRQUNBLFFBQVE7QUFBQSxRQUNSLFVBQVU7QUFBQSxRQUNWLGNBQWM7QUFBQSxRQUNkLFlBQVk7QUFBQSxRQUNaLFVBQVU7QUFBQSxRQUNWLG9CQUFvQjtBQUFBLFFBQ3BCLFlBQVksQ0FBQyxTQUFTO0FBQ2xCLGNBQUksS0FBSyxNQUFNLGNBQWMsS0FBSztBQUM5QixtQkFBTyxLQUFLLEtBQUssTUFBTSxjQUFjLEtBQUssUUFBUTtBQUFBLFVBQ3RELFdBQVcsY0FBYztBQUNyQixpQkFBSyxNQUFNLGFBQWEsSUFBSTtBQUFBLFVBQ2hDO0FBQUEsUUFDSjtBQUFBLE1BQ0o7QUFFQSxVQUFJLGlCQUFpQixNQUFNO0FBQ3ZCLGlCQUFTLGVBQWUsQ0FBQyxTQUFTO0FBQzlCLGlCQUFPO0FBQUEsWUFDSCxNQUFNLEtBQUssZ0JBQWdCLElBQUk7QUFBQSxVQUNuQztBQUFBLFFBQ0o7QUFBQSxNQUNKO0FBRUEsVUFBSSxvQkFBb0IsTUFBTTtBQUMxQixpQkFBUyxrQkFBa0IsQ0FBQyxRQUFRO0FBQ2hDLGlCQUFPO0FBQUEsWUFDSCxNQUFNLEtBQUssbUJBQW1CLEdBQUc7QUFBQSxVQUNyQztBQUFBLFFBQ0o7QUFBQSxNQUNKO0FBRUEsVUFBSSxZQUFZO0FBQ1osaUJBQVMsYUFBYTtBQUFBLE1BQzFCO0FBRUEsV0FBSyxLQUFLLElBQUksY0FBYyxLQUFLLElBQUksY0FBYyxLQUFLLEdBQUc7QUFBQSxRQUN2RCxHQUFHO0FBQUEsUUFDSCxHQUFHO0FBQUEsTUFDUCxDQUFDO0FBQ0QsYUFBTyxpQkFBaUIsZ0JBQWdCLEtBQUssUUFBUTtBQUNyRCxhQUFPLGlCQUFpQixxQkFBcUIsTUFBTSxLQUFLLEdBQUcsY0FBYyxDQUFDO0FBQUEsSUFDOUU7QUFBQSxJQUVBLFVBQVUsU0FBVSxPQUFPO0FBQ3ZCLFdBQUssR0FBRyxTQUFTLEtBQUs7QUFBQSxJQUMxQjtBQUFBLElBRUEsaUJBQWlCLFNBQVUsTUFBTTtBQUM3QixVQUFJLE9BQU8saUJBQWlCLFVBQVU7QUFDbEMsZ0JBQVEsSUFBSSxnQkFBZ0IsWUFBWTtBQUN4QyxlQUFPLEtBQUssWUFBWSxjQUFjLElBQUk7QUFBQSxNQUM5QztBQUVBLFVBQUksT0FBTyxpQkFBaUIsVUFBVTtBQUNsQyxjQUFNLFFBQVEsS0FBSyxNQUFNLGNBQWM7QUFDdkMsY0FBTSxVQUFVLGFBQWEsS0FBSztBQUNsQyxlQUFPLEtBQUssWUFBWSxTQUFTLElBQUk7QUFBQSxNQUN6QztBQUFBLElBQ0o7QUFBQSxJQUVBLG9CQUFvQixTQUFVLE1BQU07QUFDaEMsYUFBTyxLQUFLLFlBQVksaUJBQWlCLElBQUk7QUFBQSxJQUNqRDtBQUFBLElBRUEsYUFBYSxTQUFVLFNBQVMsTUFBTTtBQUNsQyxVQUFJLFlBQVksU0FBUyxjQUFjLEtBQUs7QUFDNUMsZ0JBQVUsWUFBWTtBQUd0QixnQkFBVSxhQUFhLFVBQVUsS0FBSyxVQUFVLElBQUksQ0FBQztBQUNyRCxnQkFBVSxVQUFVLElBQUksUUFBUTtBQUdoQyxhQUFPLFVBQVU7QUFBQSxJQUNyQjtBQUFBO0FBQUEsSUFHQSxxQkFBcUIsU0FBVSxTQUFTLGNBQWMsWUFBWSxJQUFJO0FBQ2xFLGFBQU8sS0FBSyxZQUFZLEVBQUUsUUFBUSxTQUFPO0FBQ3JDLGNBQU0sWUFBWSxZQUFZLEdBQUcsU0FBUyxJQUFJLEdBQUcsS0FBSztBQUN0RCxjQUFNLFFBQVEsYUFBYSxHQUFHO0FBRTlCLFlBQUksT0FBTyxVQUFVLFVBQVU7QUFFM0IsZUFBSyxvQkFBb0IsU0FBUyxPQUFPLFNBQVM7QUFBQSxRQUN0RCxPQUFPO0FBRUgsZ0JBQU0sY0FBYyxJQUFJLFNBQVM7QUFDakMsa0JBQVEsWUFBWSxRQUFRLFVBQVUsUUFBUSxJQUFJLE9BQU8sYUFBYSxHQUFHLEdBQUcsS0FBSztBQUFBLFFBQ3JGO0FBQUEsTUFDSixDQUFDO0FBQUEsSUFDTDtBQUFBLEVBQ0o7QUFDSjsiLAogICJuYW1lcyI6IFtdCn0K
